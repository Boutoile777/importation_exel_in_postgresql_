{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Cesar Boutoile777\\\\Connexion\\\\frontend\\\\dashboard\\\\src\\\\pages\\\\MonCompte.js\",\n  _s = $RefreshSig$();\n// import React, { useState, useRef } from 'react';\n// import { FiUser, FiMail, FiLock, FiEdit3, FiCheck, FiX, FiEye, FiEyeOff, FiCamera, FiImage } from 'react-icons/fi';\n\n// function MonCompte() {\n//   const [nom, setNom] = useState(\"Dupont\");\n//   const [prenom, setPrenom] = useState(\"Sergio\");\n//   const [email, setEmail] = useState(\"sergio@fnda.bj\");\n//   const [editField, setEditField] = useState(null);\n//   const [passwordFields, setPasswordFields] = useState({\n//     current: '',\n//     new: '',\n//     confirm: '',\n//   });\n\n//   const [showPassword, setShowPassword] = useState({\n//     current: false,\n//     new: false,\n//     confirm: false,\n//   });\n\n//   const [tempValues, setTempValues] = useState({\n//     nom,\n//     prenom,\n//     email,\n//   });\n\n//   // Photo profil\n//   const [avatar, setAvatar] = useState(null); // image base64\n//   const [isCameraOpen, setIsCameraOpen] = useState(false);\n//   const videoRef = useRef(null);\n//   const canvasRef = useRef(null);\n\n//   // Ouvre la caméra\n//   const openCamera = async () => {\n//     setIsCameraOpen(true);\n//     try {\n//       const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n//       if (videoRef.current) {\n//         videoRef.current.srcObject = stream;\n//         videoRef.current.play();\n//       }\n//     } catch (err) {\n//       alert(\"Erreur d'accès à la caméra : \" + err.message);\n//       setIsCameraOpen(false);\n//     }\n//   };\n\n//   // Capture la photo depuis la vidéo\n//   const capturePhoto = () => {\n//     if (!videoRef.current || !canvasRef.current) return;\n//     const video = videoRef.current;\n//     const canvas = canvasRef.current;\n//     const context = canvas.getContext('2d');\n//     canvas.width = video.videoWidth;\n//     canvas.height = video.videoHeight;\n//     context.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n//     const imageDataUrl = canvas.toDataURL('image/png');\n//     setAvatar(imageDataUrl);\n\n//     // Arrête la caméra\n//     const stream = video.srcObject;\n//     if (stream) {\n//       stream.getTracks().forEach(track => track.stop());\n//     }\n\n//     setIsCameraOpen(false);\n//   };\n\n//   // Annule la prise de photo et ferme la caméra\n//   const cancelCamera = () => {\n//     if (videoRef.current) {\n//       const stream = videoRef.current.srcObject;\n//       if (stream) {\n//         stream.getTracks().forEach(track => track.stop());\n//       }\n//     }\n//     setIsCameraOpen(false);\n//   };\n\n//   // Choix fichier depuis galerie\n//   const handleFileChange = (e) => {\n//     const file = e.target.files[0];\n//     if (!file) return;\n//     if (!file.type.startsWith(\"image/\")) {\n//       alert(\"Veuillez choisir un fichier image valide.\");\n//       return;\n//     }\n//     const reader = new FileReader();\n//     reader.onload = () => {\n//       setAvatar(reader.result);\n//     };\n//     reader.readAsDataURL(file);\n//   };\n\n//   const handleEditClick = (field) => {\n//     setEditField(field);\n//     if (field === 'nom') setTempValues(prev => ({ ...prev, nom }));\n//     else if (field === 'prenom') setTempValues(prev => ({ ...prev, prenom }));\n//     else if (field === 'email') setTempValues(prev => ({ ...prev, email }));\n//     else if (field === 'password') {\n//       setPasswordFields({ current: '', new: '', confirm: '' });\n//       setShowPassword({ current: false, new: false, confirm: false });\n//     }\n//   };\n\n//   const handleCancel = () => {\n//     setEditField(null);\n//   };\n\n//   const handleSave = () => {\n//     if (editField === \"nom\") setNom(tempValues.nom);\n//     else if (editField === \"prenom\") setPrenom(tempValues.prenom);\n//     else if (editField === \"email\") setEmail(tempValues.email);\n//     else if (editField === \"password\") {\n//       if (\n//         passwordFields.new.length >= 6 &&\n//         passwordFields.new === passwordFields.confirm\n//       ) {\n//         alert(\"Mot de passe mis à jour avec succès !\");\n//       } else {\n//         alert(\"Erreur : vérifiez les champs du mot de passe.\");\n//         return;\n//       }\n//     }\n//     setEditField(null);\n//   };\n\n//   const toggleShowPassword = (field) => {\n//     setShowPassword(prev => ({\n//       ...prev,\n//       [field]: !prev[field]\n//     }));\n//   };\n\n//   const renderPasswordInput = (fieldKey, placeholder, value, onChange) => (\n//     <div className=\"relative\">\n//       <input\n//         type={showPassword[fieldKey] ? \"text\" : \"password\"}\n//         placeholder={placeholder}\n//         value={value}\n//         onChange={onChange}\n//         className=\"input-style pr-10\"\n//       />\n//       <button\n//         type=\"button\"\n//         onClick={() => toggleShowPassword(fieldKey)}\n//         className=\"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700\"\n//         tabIndex={-1}\n//         aria-label={showPassword[fieldKey] ? \"Masquer le mot de passe\" : \"Afficher le mot de passe\"}\n//       >\n//         {showPassword[fieldKey] ? <FiEyeOff size={20} /> : <FiEye size={20} />}\n//       </button>\n//     </div>\n//   );\n\n//   const renderField = (label, fieldKey, value, icon) => {\n//     const isEditing = editField === fieldKey;\n\n//     return (\n//       <div className=\"flex flex-col gap-2 bg-white p-5 rounded-xl shadow border\">\n//         <div className=\"flex items-center gap-3 mb-1\">\n//           {icon}\n//           <h4 className=\"text-gray-600 font-medium\">{label}</h4>\n//         </div>\n\n//         {!isEditing ? (\n//           <div className=\"flex justify-between items-center\">\n//             <p className=\"text-lg font-semibold text-gray-800\">{fieldKey === \"password\" ? \"********\" : value}</p>\n//             <button\n//               onClick={() => handleEditClick(fieldKey)}\n//               className=\"text-green-600 hover:text-green-800\"\n//               title=\"Modifier\"\n//             >\n//               <FiEdit3 size={20} />\n//             </button>\n//           </div>\n//         ) : (\n//           <>\n//             {fieldKey === \"password\" ? (\n//               <>\n//                 {renderPasswordInput(\n//                   'current',\n//                   \"Mot de passe actuel\",\n//                   passwordFields.current,\n//                   (e) => setPasswordFields({ ...passwordFields, current: e.target.value })\n//                 )}\n//                 {renderPasswordInput(\n//                   'new',\n//                   \"Nouveau mot de passe\",\n//                   passwordFields.new,\n//                   (e) => setPasswordFields({ ...passwordFields, new: e.target.value })\n//                 )}\n//                 {renderPasswordInput(\n//                   'confirm',\n//                   \"Confirmer le nouveau mot de passe\",\n//                   passwordFields.confirm,\n//                   (e) => setPasswordFields({ ...passwordFields, confirm: e.target.value })\n//                 )}\n//               </>\n//             ) : (\n//               <input\n//                 type=\"text\"\n//                 value={tempValues[fieldKey]}\n//                 onChange={(e) =>\n//                   setTempValues({ ...tempValues, [fieldKey]: e.target.value })\n//                 }\n//                 className=\"input-style\"\n//               />\n//             )}\n\n//             <div className=\"flex gap-2 mt-2\">\n//               <button\n//                 onClick={handleSave}\n//                 className=\"text-green-600 hover:text-green-800\"\n//                 title=\"Enregistrer\"\n//               >\n//                 <FiCheck size={20} />\n//               </button>\n//               <button\n//                 onClick={handleCancel}\n//                 className=\"text-red-500 hover:text-red-700\"\n//                 title=\"Annuler\"\n//               >\n//                 <FiX size={20} />\n//               </button>\n//             </div>\n//           </>\n//         )}\n//       </div>\n//     );\n//   };\n\n//   return (\n//     <div className=\"w-full min-h-screen bg-gray-50 flex flex-col items-center px-4 py-10\">\n//       <h2 className=\"text-4xl font-bold text-green-700 mb-8\">\n//         Mon compte\n//       </h2>\n\n//       <div className=\"w-full max-w-4xl bg-white rounded-3xl shadow-xl p-6 md:p-10 flex flex-col md:flex-row gap-10 items-center md:items-start\">\n//         {/* AVATAR + CONTROLES */}\n//         <div className=\"flex flex-col items-center gap-4\">\n//           {/* Avatar cliquable */}\n//           <div\n//             onClick={openCamera}\n//             className=\"cursor-pointer w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden border-4 border-green-100 shadow-md flex items-center justify-center bg-gray-100\"\n//             title=\"Cliquer pour prendre une photo\"\n//           >\n//             {avatar ? (\n//               <img src={avatar} alt=\"Avatar utilisateur\" className=\"object-cover w-full h-full\" />\n//             ) : (\n//               <FiUser className=\"text-green-600 w-20 h-20 md:w-24 md:h-24 p-6\" />\n//             )}\n//           </div>\n\n//           {/* Input fichier pour galerie */}\n//           <label\n//             htmlFor=\"fileInput\"\n//             className=\"cursor-pointer flex items-center gap-2 text-green-600 hover:text-green-800 font-medium\"\n//           >\n//             <FiImage size={24} /> Choisir une image depuis la galerie\n//           </label>\n//           <input\n//             type=\"file\"\n//             id=\"fileInput\"\n//             accept=\"image/*\"\n//             onChange={handleFileChange}\n//             className=\"hidden\"\n//           />\n\n//           {/* Camera modal */}\n//           {isCameraOpen && (\n//             <div className=\"fixed inset-0 bg-black bg-opacity-70 flex flex-col items-center justify-center z-50 p-4\">\n//               <video ref={videoRef} className=\"rounded-lg max-w-full max-h-[70vh]\" />\n//               <div className=\"mt-4 flex gap-4\">\n//                 <button\n//                   onClick={capturePhoto}\n//                   className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\n//                 >\n//                   Prendre la photo\n//                 </button>\n//                 <button\n//                   onClick={cancelCamera}\n//                   className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\"\n//                 >\n//                   Annuler\n//                 </button>\n//               </div>\n//               <canvas ref={canvasRef} className=\"hidden\" />\n//             </div>\n//           )}\n//         </div>\n\n//         {/* FORMULAIRE */}\n//         <div className=\"flex flex-col flex-grow gap-6 w-full max-w-md\">\n//           {renderField(\"Nom\", \"nom\", nom, <FiUser size={24} className=\"text-green-600\" />)}\n//           {renderField(\"Prénom\", \"prenom\", prenom, <FiUser size={24} className=\"text-green-600\" />)}\n//           {renderField(\"Adresse email\", \"email\", email, <FiMail size={24} className=\"text-green-600\" />)}\n//           {renderField(\"Mot de passe\", \"password\", null, <FiLock size={24} className=\"text-green-600\" />)}\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default MonCompte;\n\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { FiUser, FiEdit3, FiCheck, FiX, FiImage } from \"react-icons/fi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MonCompte() {\n  _s();\n  const [nom, setNom] = useState(\"\");\n  const [prenom, setPrenom] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [editField, setEditField] = useState(null);\n  const [tempValues, setTempValues] = useState({\n    nom: \"\",\n    prenom: \"\",\n    email: \"\"\n  });\n  const [avatar, setAvatar] = useState(null);\n  const [isCameraOpen, setIsCameraOpen] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  // Chargement profil au montage\n  useEffect(() => {\n    fetch(\"http://localhost:5000/auth/profile\", {\n      method: \"GET\",\n      credentials: \"include\"\n    }).then(res => {\n      if (!res.ok) throw new Error(\"Impossible de charger le profil utilisateur.\");\n      return res.json();\n    }).then(data => {\n      setNom(data.nom);\n      setPrenom(data.prenom);\n      setEmail(data.email);\n      setTempValues({\n        nom: data.nom,\n        prenom: data.prenom,\n        email: data.email\n      });\n      if (data.avatar) setAvatar(data.avatar);\n    }).catch(err => {\n      alert(err.message);\n    });\n  }, []);\n\n  // Gestion édition champs\n  const handleEditClick = field => {\n    setEditField(field);\n    setTempValues(prev => ({\n      ...prev,\n      [field]: eval(field)\n    }));\n  };\n  const handleCancel = () => {\n    setEditField(null);\n    setTempValues({\n      nom,\n      prenom,\n      email\n    });\n  };\n  const handleChange = (field, value) => {\n    setTempValues(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleSave = () => {\n    const dataToSend = {\n      nom: tempValues.nom,\n      prenom: tempValues.prenom,\n      email: tempValues.email,\n      avatar: avatar\n    };\n    fetch(\"http://localhost:5000/auth/profile\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dataToSend)\n    }).then(res => {\n      if (!res.ok) throw new Error(\"Erreur lors de la sauvegarde.\");\n      return res.json();\n    }).then(() => {\n      setNom(tempValues.nom);\n      setPrenom(tempValues.prenom);\n      setEmail(tempValues.email);\n      setEditField(null);\n      alert(\"Profil mis à jour avec succès !\");\n    }).catch(err => {\n      alert(err.message);\n    });\n  };\n\n  // Gestion caméra avatar\n  const startCamera = () => {\n    setIsCameraOpen(true);\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(stream => {\n        videoRef.current.srcObject = stream;\n        videoRef.current.play();\n      }).catch(() => alert(\"Impossible d'accéder à la caméra.\"));\n    }\n  };\n  const takePhoto = () => {\n    const context = canvasRef.current.getContext(\"2d\");\n    context.drawImage(videoRef.current, 0, 0, 320, 240);\n    const imageData = canvasRef.current.toDataURL(\"image/png\");\n    setAvatar(imageData);\n    stopCamera();\n  };\n  const stopCamera = () => {\n    setIsCameraOpen(false);\n    if (videoRef.current && videoRef.current.srcObject) {\n      videoRef.current.srcObject.getTracks().forEach(track => track.stop());\n      videoRef.current.srcObject = null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mon-compte-container p-4 max-w-lg mx-auto bg-white rounded shadow\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Mon compte\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"avatar-section mb-4 text-center\",\n      children: [avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: avatar,\n        alt: \"Avatar\",\n        className: \"w-24 h-24 rounded-full mx-auto mb-2 object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(FiUser, {\n        className: \"w-24 h-24 mx-auto mb-2 text-gray-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 11\n      }, this), !isCameraOpen ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary inline-flex items-center gap-2\",\n        onClick: startCamera,\n        title: \"Prendre une photo\",\n        children: [/*#__PURE__*/_jsxDEV(FiImage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 13\n        }, this), \" Prendre une photo\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          width: \"320\",\n          height: \"240\",\n          className: \"mx-auto rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-center gap-4 mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: takePhoto,\n            className: \"btn btn-success\",\n            children: [/*#__PURE__*/_jsxDEV(FiCheck, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 17\n            }, this), \" Capturer\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: stopCamera,\n            className: \"btn btn-danger\",\n            children: [/*#__PURE__*/_jsxDEV(FiX, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 17\n            }, this), \" Annuler\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          width: \"320\",\n          height: \"240\",\n          style: {\n            display: \"none\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 7\n    }, this), [\"nom\", \"prenom\", \"email\"].map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block font-medium mb-1 capitalize\",\n        children: field\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 11\n      }, this), editField === field ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: field === \"email\" ? \"email\" : \"text\",\n          value: tempValues[field],\n          onChange: e => handleChange(field, e.target.value),\n          className: \"border rounded px-2 py-1 flex-grow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSave,\n          className: \"btn btn-success\",\n          title: \"Enregistrer\",\n          children: /*#__PURE__*/_jsxDEV(FiCheck, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCancel,\n          className: \"btn btn-danger\",\n          title: \"Annuler\",\n          children: /*#__PURE__*/_jsxDEV(FiX, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between border rounded px-2 py-1 cursor-pointer\",\n        onClick: () => handleEditClick(field),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: eval(field)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(FiEdit3, {\n          className: \"text-gray-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 13\n      }, this)]\n    }, field, true, {\n      fileName: _jsxFileName,\n      lineNumber: 475,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 439,\n    columnNumber: 5\n  }, this);\n}\n_s(MonCompte, \"Bc1Np+gkybBZR7dl/nhVGMpRllo=\");\n_c = MonCompte;\nexport default MonCompte;\nvar _c;\n$RefreshReg$(_c, \"MonCompte\");","map":{"version":3,"names":["React","useState","useRef","useEffect","FiUser","FiEdit3","FiCheck","FiX","FiImage","jsxDEV","_jsxDEV","MonCompte","_s","nom","setNom","prenom","setPrenom","email","setEmail","editField","setEditField","tempValues","setTempValues","avatar","setAvatar","isCameraOpen","setIsCameraOpen","videoRef","canvasRef","fetch","method","credentials","then","res","ok","Error","json","data","catch","err","alert","message","handleEditClick","field","prev","eval","handleCancel","handleChange","value","handleSave","dataToSend","headers","body","JSON","stringify","startCamera","navigator","mediaDevices","getUserMedia","video","stream","current","srcObject","play","takePhoto","context","getContext","drawImage","imageData","toDataURL","stopCamera","getTracks","forEach","track","stop","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","onClick","title","ref","width","height","style","display","map","type","onChange","e","target","_c","$RefreshReg$"],"sources":["C:/Users/Cesar Boutoile777/Connexion/frontend/dashboard/src/pages/MonCompte.js"],"sourcesContent":["// import React, { useState, useRef } from 'react';\r\n// import { FiUser, FiMail, FiLock, FiEdit3, FiCheck, FiX, FiEye, FiEyeOff, FiCamera, FiImage } from 'react-icons/fi';\r\n\r\n// function MonCompte() {\r\n//   const [nom, setNom] = useState(\"Dupont\");\r\n//   const [prenom, setPrenom] = useState(\"Sergio\");\r\n//   const [email, setEmail] = useState(\"sergio@fnda.bj\");\r\n//   const [editField, setEditField] = useState(null);\r\n//   const [passwordFields, setPasswordFields] = useState({\r\n//     current: '',\r\n//     new: '',\r\n//     confirm: '',\r\n//   });\r\n\r\n//   const [showPassword, setShowPassword] = useState({\r\n//     current: false,\r\n//     new: false,\r\n//     confirm: false,\r\n//   });\r\n\r\n//   const [tempValues, setTempValues] = useState({\r\n//     nom,\r\n//     prenom,\r\n//     email,\r\n//   });\r\n\r\n//   // Photo profil\r\n//   const [avatar, setAvatar] = useState(null); // image base64\r\n//   const [isCameraOpen, setIsCameraOpen] = useState(false);\r\n//   const videoRef = useRef(null);\r\n//   const canvasRef = useRef(null);\r\n\r\n//   // Ouvre la caméra\r\n//   const openCamera = async () => {\r\n//     setIsCameraOpen(true);\r\n//     try {\r\n//       const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n//       if (videoRef.current) {\r\n//         videoRef.current.srcObject = stream;\r\n//         videoRef.current.play();\r\n//       }\r\n//     } catch (err) {\r\n//       alert(\"Erreur d'accès à la caméra : \" + err.message);\r\n//       setIsCameraOpen(false);\r\n//     }\r\n//   };\r\n\r\n//   // Capture la photo depuis la vidéo\r\n//   const capturePhoto = () => {\r\n//     if (!videoRef.current || !canvasRef.current) return;\r\n//     const video = videoRef.current;\r\n//     const canvas = canvasRef.current;\r\n//     const context = canvas.getContext('2d');\r\n//     canvas.width = video.videoWidth;\r\n//     canvas.height = video.videoHeight;\r\n//     context.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n//     const imageDataUrl = canvas.toDataURL('image/png');\r\n//     setAvatar(imageDataUrl);\r\n\r\n//     // Arrête la caméra\r\n//     const stream = video.srcObject;\r\n//     if (stream) {\r\n//       stream.getTracks().forEach(track => track.stop());\r\n//     }\r\n\r\n//     setIsCameraOpen(false);\r\n//   };\r\n\r\n//   // Annule la prise de photo et ferme la caméra\r\n//   const cancelCamera = () => {\r\n//     if (videoRef.current) {\r\n//       const stream = videoRef.current.srcObject;\r\n//       if (stream) {\r\n//         stream.getTracks().forEach(track => track.stop());\r\n//       }\r\n//     }\r\n//     setIsCameraOpen(false);\r\n//   };\r\n\r\n//   // Choix fichier depuis galerie\r\n//   const handleFileChange = (e) => {\r\n//     const file = e.target.files[0];\r\n//     if (!file) return;\r\n//     if (!file.type.startsWith(\"image/\")) {\r\n//       alert(\"Veuillez choisir un fichier image valide.\");\r\n//       return;\r\n//     }\r\n//     const reader = new FileReader();\r\n//     reader.onload = () => {\r\n//       setAvatar(reader.result);\r\n//     };\r\n//     reader.readAsDataURL(file);\r\n//   };\r\n\r\n//   const handleEditClick = (field) => {\r\n//     setEditField(field);\r\n//     if (field === 'nom') setTempValues(prev => ({ ...prev, nom }));\r\n//     else if (field === 'prenom') setTempValues(prev => ({ ...prev, prenom }));\r\n//     else if (field === 'email') setTempValues(prev => ({ ...prev, email }));\r\n//     else if (field === 'password') {\r\n//       setPasswordFields({ current: '', new: '', confirm: '' });\r\n//       setShowPassword({ current: false, new: false, confirm: false });\r\n//     }\r\n//   };\r\n\r\n//   const handleCancel = () => {\r\n//     setEditField(null);\r\n//   };\r\n\r\n//   const handleSave = () => {\r\n//     if (editField === \"nom\") setNom(tempValues.nom);\r\n//     else if (editField === \"prenom\") setPrenom(tempValues.prenom);\r\n//     else if (editField === \"email\") setEmail(tempValues.email);\r\n//     else if (editField === \"password\") {\r\n//       if (\r\n//         passwordFields.new.length >= 6 &&\r\n//         passwordFields.new === passwordFields.confirm\r\n//       ) {\r\n//         alert(\"Mot de passe mis à jour avec succès !\");\r\n//       } else {\r\n//         alert(\"Erreur : vérifiez les champs du mot de passe.\");\r\n//         return;\r\n//       }\r\n//     }\r\n//     setEditField(null);\r\n//   };\r\n\r\n//   const toggleShowPassword = (field) => {\r\n//     setShowPassword(prev => ({\r\n//       ...prev,\r\n//       [field]: !prev[field]\r\n//     }));\r\n//   };\r\n\r\n//   const renderPasswordInput = (fieldKey, placeholder, value, onChange) => (\r\n//     <div className=\"relative\">\r\n//       <input\r\n//         type={showPassword[fieldKey] ? \"text\" : \"password\"}\r\n//         placeholder={placeholder}\r\n//         value={value}\r\n//         onChange={onChange}\r\n//         className=\"input-style pr-10\"\r\n//       />\r\n//       <button\r\n//         type=\"button\"\r\n//         onClick={() => toggleShowPassword(fieldKey)}\r\n//         className=\"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700\"\r\n//         tabIndex={-1}\r\n//         aria-label={showPassword[fieldKey] ? \"Masquer le mot de passe\" : \"Afficher le mot de passe\"}\r\n//       >\r\n//         {showPassword[fieldKey] ? <FiEyeOff size={20} /> : <FiEye size={20} />}\r\n//       </button>\r\n//     </div>\r\n//   );\r\n\r\n//   const renderField = (label, fieldKey, value, icon) => {\r\n//     const isEditing = editField === fieldKey;\r\n\r\n//     return (\r\n//       <div className=\"flex flex-col gap-2 bg-white p-5 rounded-xl shadow border\">\r\n//         <div className=\"flex items-center gap-3 mb-1\">\r\n//           {icon}\r\n//           <h4 className=\"text-gray-600 font-medium\">{label}</h4>\r\n//         </div>\r\n\r\n//         {!isEditing ? (\r\n//           <div className=\"flex justify-between items-center\">\r\n//             <p className=\"text-lg font-semibold text-gray-800\">{fieldKey === \"password\" ? \"********\" : value}</p>\r\n//             <button\r\n//               onClick={() => handleEditClick(fieldKey)}\r\n//               className=\"text-green-600 hover:text-green-800\"\r\n//               title=\"Modifier\"\r\n//             >\r\n//               <FiEdit3 size={20} />\r\n//             </button>\r\n//           </div>\r\n//         ) : (\r\n//           <>\r\n//             {fieldKey === \"password\" ? (\r\n//               <>\r\n//                 {renderPasswordInput(\r\n//                   'current',\r\n//                   \"Mot de passe actuel\",\r\n//                   passwordFields.current,\r\n//                   (e) => setPasswordFields({ ...passwordFields, current: e.target.value })\r\n//                 )}\r\n//                 {renderPasswordInput(\r\n//                   'new',\r\n//                   \"Nouveau mot de passe\",\r\n//                   passwordFields.new,\r\n//                   (e) => setPasswordFields({ ...passwordFields, new: e.target.value })\r\n//                 )}\r\n//                 {renderPasswordInput(\r\n//                   'confirm',\r\n//                   \"Confirmer le nouveau mot de passe\",\r\n//                   passwordFields.confirm,\r\n//                   (e) => setPasswordFields({ ...passwordFields, confirm: e.target.value })\r\n//                 )}\r\n//               </>\r\n//             ) : (\r\n//               <input\r\n//                 type=\"text\"\r\n//                 value={tempValues[fieldKey]}\r\n//                 onChange={(e) =>\r\n//                   setTempValues({ ...tempValues, [fieldKey]: e.target.value })\r\n//                 }\r\n//                 className=\"input-style\"\r\n//               />\r\n//             )}\r\n\r\n//             <div className=\"flex gap-2 mt-2\">\r\n//               <button\r\n//                 onClick={handleSave}\r\n//                 className=\"text-green-600 hover:text-green-800\"\r\n//                 title=\"Enregistrer\"\r\n//               >\r\n//                 <FiCheck size={20} />\r\n//               </button>\r\n//               <button\r\n//                 onClick={handleCancel}\r\n//                 className=\"text-red-500 hover:text-red-700\"\r\n//                 title=\"Annuler\"\r\n//               >\r\n//                 <FiX size={20} />\r\n//               </button>\r\n//             </div>\r\n//           </>\r\n//         )}\r\n//       </div>\r\n//     );\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"w-full min-h-screen bg-gray-50 flex flex-col items-center px-4 py-10\">\r\n//       <h2 className=\"text-4xl font-bold text-green-700 mb-8\">\r\n//         Mon compte\r\n//       </h2>\r\n\r\n//       <div className=\"w-full max-w-4xl bg-white rounded-3xl shadow-xl p-6 md:p-10 flex flex-col md:flex-row gap-10 items-center md:items-start\">\r\n//         {/* AVATAR + CONTROLES */}\r\n//         <div className=\"flex flex-col items-center gap-4\">\r\n//           {/* Avatar cliquable */}\r\n//           <div\r\n//             onClick={openCamera}\r\n//             className=\"cursor-pointer w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden border-4 border-green-100 shadow-md flex items-center justify-center bg-gray-100\"\r\n//             title=\"Cliquer pour prendre une photo\"\r\n//           >\r\n//             {avatar ? (\r\n//               <img src={avatar} alt=\"Avatar utilisateur\" className=\"object-cover w-full h-full\" />\r\n//             ) : (\r\n//               <FiUser className=\"text-green-600 w-20 h-20 md:w-24 md:h-24 p-6\" />\r\n//             )}\r\n//           </div>\r\n\r\n//           {/* Input fichier pour galerie */}\r\n//           <label\r\n//             htmlFor=\"fileInput\"\r\n//             className=\"cursor-pointer flex items-center gap-2 text-green-600 hover:text-green-800 font-medium\"\r\n//           >\r\n//             <FiImage size={24} /> Choisir une image depuis la galerie\r\n//           </label>\r\n//           <input\r\n//             type=\"file\"\r\n//             id=\"fileInput\"\r\n//             accept=\"image/*\"\r\n//             onChange={handleFileChange}\r\n//             className=\"hidden\"\r\n//           />\r\n\r\n//           {/* Camera modal */}\r\n//           {isCameraOpen && (\r\n//             <div className=\"fixed inset-0 bg-black bg-opacity-70 flex flex-col items-center justify-center z-50 p-4\">\r\n//               <video ref={videoRef} className=\"rounded-lg max-w-full max-h-[70vh]\" />\r\n//               <div className=\"mt-4 flex gap-4\">\r\n//                 <button\r\n//                   onClick={capturePhoto}\r\n//                   className=\"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700\"\r\n//                 >\r\n//                   Prendre la photo\r\n//                 </button>\r\n//                 <button\r\n//                   onClick={cancelCamera}\r\n//                   className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\"\r\n//                 >\r\n//                   Annuler\r\n//                 </button>\r\n//               </div>\r\n//               <canvas ref={canvasRef} className=\"hidden\" />\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n\r\n//         {/* FORMULAIRE */}\r\n//         <div className=\"flex flex-col flex-grow gap-6 w-full max-w-md\">\r\n//           {renderField(\"Nom\", \"nom\", nom, <FiUser size={24} className=\"text-green-600\" />)}\r\n//           {renderField(\"Prénom\", \"prenom\", prenom, <FiUser size={24} className=\"text-green-600\" />)}\r\n//           {renderField(\"Adresse email\", \"email\", email, <FiMail size={24} className=\"text-green-600\" />)}\r\n//           {renderField(\"Mot de passe\", \"password\", null, <FiLock size={24} className=\"text-green-600\" />)}\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default MonCompte;\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport { FiUser, FiEdit3, FiCheck, FiX, FiImage } from \"react-icons/fi\";\r\n\r\nfunction MonCompte() {\r\n  const [nom, setNom] = useState(\"\");\r\n  const [prenom, setPrenom] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [editField, setEditField] = useState(null);\r\n  const [tempValues, setTempValues] = useState({\r\n    nom: \"\",\r\n    prenom: \"\",\r\n    email: \"\",\r\n  });\r\n  const [avatar, setAvatar] = useState(null);\r\n  const [isCameraOpen, setIsCameraOpen] = useState(false);\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n\r\n  // Chargement profil au montage\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/auth/profile\", {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) throw new Error(\"Impossible de charger le profil utilisateur.\");\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        setNom(data.nom);\r\n        setPrenom(data.prenom);\r\n        setEmail(data.email);\r\n        setTempValues({\r\n          nom: data.nom,\r\n          prenom: data.prenom,\r\n          email: data.email,\r\n        });\r\n        if (data.avatar) setAvatar(data.avatar);\r\n      })\r\n      .catch((err) => {\r\n        alert(err.message);\r\n      });\r\n  }, []);\r\n\r\n  // Gestion édition champs\r\n  const handleEditClick = (field) => {\r\n    setEditField(field);\r\n    setTempValues((prev) => ({ ...prev, [field]: eval(field) }));\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditField(null);\r\n    setTempValues({\r\n      nom,\r\n      prenom,\r\n      email,\r\n    });\r\n  };\r\n\r\n  const handleChange = (field, value) => {\r\n    setTempValues((prev) => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleSave = () => {\r\n    const dataToSend = {\r\n      nom: tempValues.nom,\r\n      prenom: tempValues.prenom,\r\n      email: tempValues.email,\r\n      avatar: avatar,\r\n    };\r\n\r\n    fetch(\"http://localhost:5000/auth/profile\", {\r\n      method: \"POST\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(dataToSend),\r\n    })\r\n      .then((res) => {\r\n        if (!res.ok) throw new Error(\"Erreur lors de la sauvegarde.\");\r\n        return res.json();\r\n      })\r\n      .then(() => {\r\n        setNom(tempValues.nom);\r\n        setPrenom(tempValues.prenom);\r\n        setEmail(tempValues.email);\r\n        setEditField(null);\r\n        alert(\"Profil mis à jour avec succès !\");\r\n      })\r\n      .catch((err) => {\r\n        alert(err.message);\r\n      });\r\n  };\r\n\r\n  // Gestion caméra avatar\r\n  const startCamera = () => {\r\n    setIsCameraOpen(true);\r\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n      navigator.mediaDevices\r\n        .getUserMedia({ video: true })\r\n        .then((stream) => {\r\n          videoRef.current.srcObject = stream;\r\n          videoRef.current.play();\r\n        })\r\n        .catch(() => alert(\"Impossible d'accéder à la caméra.\"));\r\n    }\r\n  };\r\n\r\n  const takePhoto = () => {\r\n    const context = canvasRef.current.getContext(\"2d\");\r\n    context.drawImage(videoRef.current, 0, 0, 320, 240);\r\n    const imageData = canvasRef.current.toDataURL(\"image/png\");\r\n    setAvatar(imageData);\r\n    stopCamera();\r\n  };\r\n\r\n  const stopCamera = () => {\r\n    setIsCameraOpen(false);\r\n    if (videoRef.current && videoRef.current.srcObject) {\r\n      videoRef.current.srcObject.getTracks().forEach((track) => track.stop());\r\n      videoRef.current.srcObject = null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mon-compte-container p-4 max-w-lg mx-auto bg-white rounded shadow\">\r\n      <h2 className=\"text-xl font-semibold mb-4\">Mon compte</h2>\r\n\r\n      {/* Avatar */}\r\n      <div className=\"avatar-section mb-4 text-center\">\r\n        {avatar ? (\r\n          <img src={avatar} alt=\"Avatar\" className=\"w-24 h-24 rounded-full mx-auto mb-2 object-cover\" />\r\n        ) : (\r\n          <FiUser className=\"w-24 h-24 mx-auto mb-2 text-gray-400\" />\r\n        )}\r\n        {!isCameraOpen ? (\r\n          <button\r\n            className=\"btn btn-primary inline-flex items-center gap-2\"\r\n            onClick={startCamera}\r\n            title=\"Prendre une photo\"\r\n          >\r\n            <FiImage /> Prendre une photo\r\n          </button>\r\n        ) : (\r\n          <div>\r\n            <video ref={videoRef} width=\"320\" height=\"240\" className=\"mx-auto rounded\"></video>\r\n            <div className=\"flex justify-center gap-4 mt-2\">\r\n              <button onClick={takePhoto} className=\"btn btn-success\">\r\n                <FiCheck /> Capturer\r\n              </button>\r\n              <button onClick={stopCamera} className=\"btn btn-danger\">\r\n                <FiX /> Annuler\r\n              </button>\r\n            </div>\r\n            <canvas ref={canvasRef} width=\"320\" height=\"240\" style={{ display: \"none\" }} />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Champs Nom, Prenom, Email */}\r\n      {[\"nom\", \"prenom\", \"email\"].map((field) => (\r\n        <div key={field} className=\"mb-4\">\r\n          <label className=\"block font-medium mb-1 capitalize\">{field}</label>\r\n          {editField === field ? (\r\n            <div className=\"flex items-center gap-2\">\r\n              <input\r\n                type={field === \"email\" ? \"email\" : \"text\"}\r\n                value={tempValues[field]}\r\n                onChange={(e) => handleChange(field, e.target.value)}\r\n                className=\"border rounded px-2 py-1 flex-grow\"\r\n              />\r\n              <button onClick={handleSave} className=\"btn btn-success\" title=\"Enregistrer\">\r\n                <FiCheck />\r\n              </button>\r\n              <button onClick={handleCancel} className=\"btn btn-danger\" title=\"Annuler\">\r\n                <FiX />\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div\r\n              className=\"flex items-center justify-between border rounded px-2 py-1 cursor-pointer\"\r\n              onClick={() => handleEditClick(field)}\r\n            >\r\n              <span>{eval(field)}</span>\r\n              <FiEdit3 className=\"text-gray-500\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MonCompte;\r\n"],"mappings":";;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}